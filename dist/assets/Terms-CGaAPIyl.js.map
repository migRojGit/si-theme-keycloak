{"version":3,"file":"Terms-CGaAPIyl.js","sources":["../../src/keycloak-theme/login/pages/Terms.tsx"],"sourcesContent":["import { clsx } from \"keycloakify/tools/clsx\";\r\nimport { useRerenderOnStateChange } from \"evt/hooks\";\r\nimport { Markdown } from \"keycloakify/tools/Markdown\";\r\nimport type { PageProps } from \"keycloakify/login/pages/PageProps\";\r\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\r\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\r\nimport type { KcContext } from \"../kcContext\";\r\nimport type { I18n } from \"../i18n\";\r\nimport { useDownloadTerms } from \"keycloakify/login\";\r\n\r\nexport default function Terms(props: PageProps<Extract<KcContext, { pageId: \"terms.ftl\" }>, I18n>) {\r\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\r\n\r\n    const { getClassName } = useGetClassName({\r\n        doUseDefaultCss,\r\n        classes\r\n    });\r\n\r\n    const { msg, msgStr } = i18n;\r\n\r\n    // NOTE: If you aren't going to customize the layout of the page you can move this hook to \r\n    // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\r\n    useDownloadTerms({\r\n        kcContext,\r\n        \"downloadTermMarkdown\": async ({currentLanguageTag}) => {\r\n\r\n            const tos_url = (() => {\r\n                switch (currentLanguageTag) {\r\n                    case \"fr\": return `${import.meta.env.BASE_URL}terms/fr.md`;\r\n                    default: return `${import.meta.env.BASE_URL}terms/en.md`;\r\n                }\r\n            })();\r\n\r\n            const markdownString = await fetch(tos_url).then(response => response.text());\r\n\r\n            return markdownString;\r\n\r\n        }\r\n    });\r\n\r\n    useRerenderOnStateChange(evtTermMarkdown);\r\n\r\n    const { url } = kcContext;\r\n\r\n    const termMarkdown = evtTermMarkdown.state;\r\n\r\n    if (termMarkdown === undefined) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }} displayMessage={false} headerNode={msg(\"termsTitle\")}>\r\n            <div id=\"kc-terms-text\">\r\n                <Markdown>{termMarkdown}</Markdown>\r\n            </div>\r\n            <form className=\"form-actions\" action={url.loginAction} method=\"POST\">\r\n                <input\r\n                    className={clsx(\r\n                        getClassName(\"kcButtonClass\"),\r\n                        getClassName(\"kcButtonClass\"),\r\n                        getClassName(\"kcButtonClass\"),\r\n                        getClassName(\"kcButtonPrimaryClass\"),\r\n                        getClassName(\"kcButtonLargeClass\")\r\n                    )}\r\n                    name=\"accept\"\r\n                    id=\"kc-accept\"\r\n                    type=\"submit\"\r\n                    value={msgStr(\"doAccept\")}\r\n                />\r\n                <input\r\n                    className={clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\"))}\r\n                    name=\"cancel\"\r\n                    id=\"kc-decline\"\r\n                    type=\"submit\"\r\n                    value={msgStr(\"doDecline\")}\r\n                />\r\n            </form>\r\n            <div className=\"clearfix\" />\r\n        </Template>\r\n    );\r\n}\r\n"],"names":["Terms","props","kcContext","i18n","doUseDefaultCss","Template","classes","getClassName","useGetClassName","msg","msgStr","useDownloadTerms","currentLanguageTag","tos_url","response","useRerenderOnStateChange","evtTermMarkdown","url","termMarkdown","jsx","Markdown","jsxs","clsx"],"mappings":"yMAUA,SAAwBA,EAAMC,EAAqE,CAC/F,KAAM,CAAE,UAAAC,EAAW,KAAAC,EAAM,gBAAAC,EAAiB,SAAAC,EAAU,QAAAC,CAAY,EAAAL,EAE1D,CAAE,aAAAM,CAAa,EAAIC,EAAgB,CACrC,gBAAAJ,EACA,QAAAE,CAAA,CACH,EAEK,CAAE,IAAAG,EAAK,OAAAC,CAAW,EAAAP,EAIPQ,EAAA,CACb,UAAAT,EACA,qBAAwB,MAAO,CAAC,mBAAAU,KAAwB,CAEpD,MAAMC,GAAW,IAAM,CACnB,OAAQD,EAAoB,CACxB,IAAK,KAAa,MAAA,eAClB,QAAgB,MAAA,cACpB,CAAA,KAKG,OAFgB,MAAM,MAAMC,CAAO,EAAE,KAAKC,GAAYA,EAAS,KAAA,CAAM,CAIhF,CAAA,CACH,EAEDC,EAAA,yBAAyBC,CAAe,EAElC,KAAA,CAAE,IAAAC,CAAQ,EAAAf,EAEVgB,EAAeF,EAAgB,MAErC,OAAIE,IAAiB,OACV,YAINb,EAAA,CAAe,UAAAH,EAAW,KAAAC,EAAM,gBAAAC,EAAiB,QAAAE,EAAW,eAAgB,GAAO,WAAYG,EAAI,YAAY,EAC5G,SAAA,CAACU,EAAAA,IAAA,OAAI,GAAG,gBACJ,SAACA,MAAAC,EAAA,CAAU,WAAa,EAC5B,EACAC,EAAAA,KAAC,QAAK,UAAU,eAAe,OAAQJ,EAAI,YAAa,OAAO,OAC3D,SAAA,CAAAE,EAAA,IAAC,QAAA,CACG,UAAWG,EACPf,EAAa,eAAe,EAC5BA,EAAa,eAAe,EAC5BA,EAAa,eAAe,EAC5BA,EAAa,sBAAsB,EACnCA,EAAa,oBAAoB,CACrC,EACA,KAAK,SACL,GAAG,YACH,KAAK,SACL,MAAOG,EAAO,UAAU,CAAA,CAC5B,EACAS,EAAA,IAAC,QAAA,CACG,UAAWG,EAAKf,EAAa,eAAe,EAAGA,EAAa,sBAAsB,EAAGA,EAAa,oBAAoB,CAAC,EACvH,KAAK,SACL,GAAG,aACH,KAAK,SACL,MAAOG,EAAO,WAAW,CAAA,CAC7B,CAAA,EACJ,EACCS,EAAAA,IAAA,MAAI,CAAA,UAAU,WAAW,GAC9B,CAER"}